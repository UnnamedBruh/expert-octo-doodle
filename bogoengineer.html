<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Corruption Demonstration</title>
</head>
<body>
    <h1>Corrupt: Corrupt Any Files!</h1>
    <input type="file" id="fileInput" />
    <button id="convertButton">Convert and Revert</button>
    <a id="downloadLink" style="display:none;">Download Converted File</a>

<script>
    document.getElementById('convertButton').addEventListener('click', async () => {
        const fileInput = document.getElementById('fileInput');
        const file = fileInput.files[0];

        if (!file) {
            alert('Please upload a file.');
            return;
        }

        // Step 1: Read the file
        const arrayBuffer = await readFileAsArrayBuffer(file);
        const uint8Array = new Uint8Array(arrayBuffer);

        // Step 2: Example manipulation (corruption)
        const corruptionLevel = 0.01;  // 1% of the bytes will be corrupted
        const corruptedData = uint8Array.map(byte => {
            return Math.random() < corruptionLevel ? (byte ^ (Math.floor(Math.random() * 255))) : byte;
        });

        // Step 3: Create a corrupted blob
        const corruptedBlob = new Blob([corruptedData], { type: file.type });

        // Set up download link
        const downloadLink = document.getElementById('downloadLink');
        downloadLink.href = URL.createObjectURL(corruptedBlob);
        downloadLink.download = `corrupted_${file.name}`;
        downloadLink.style.display = 'block';
        downloadLink.textContent = 'Download Corrupted File';
    });

    function readFileAsArrayBuffer(file) {
        return new Promise((resolve, reject) => {
            const reader = new FileReader();
            reader.onload = (event) => resolve(event.target.result);
            reader.onerror = reject;
            reader.readAsArrayBuffer(file);
        });
    }
</script>
</body>
</html>
