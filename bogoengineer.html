<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BogoEngineering</title>
</head>
<body>
    <h1>BogoEngineering: Convert Files!</h1>
    <input type="file" id="fileInput" />
    <button id="convertButton">Convert and Revert</button>
    <a id="downloadLink" style="display:none;">Download Original File</a>

    <script>
        document.getElementById('convertButton').addEventListener('click', async () => {
            const fileInput = document.getElementById('fileInput');
            const file = fileInput.files[0];

            if (!file) {
                alert('Please upload a file.');
                return;
            }

            // Step 1: Convert file to image (grayscale)
            const text = await readFileAsText(file);
            const audio = new Float32Array(text.split('').map(data => data.charCodeAt(0) / 65536));
            const reversedResult = [...audio].map(data => String.fromCharCode(Math.round(data * 65536))).join("")

            // Step 3: Revert back to original file (for demo, we'll use the original text)
            const originalBlob = new Blob([reversedResult], { type: file.type });

            // Set up download link
            const downloadLink = document.getElementById('downloadLink');
            downloadLink.href = URL.createObjectURL(originalBlob);
            downloadLink.download = 'original'; // You can change this name
            downloadLink.style.display = 'block';
            downloadLink.textContent = 'Download BogoEngineered File';
        });

        function readFileAsText(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.onload = (event) => resolve(event.target.result);
                reader.onerror = reject;
                reader.readAsText(file);
            });
        }
    }
    </script>
</body>
</html>
